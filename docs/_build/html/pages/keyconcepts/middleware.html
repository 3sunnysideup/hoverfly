

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Middleware &mdash; Hoverfly v0.10.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Hoverfly v0.10.0 documentation" href="../../index.html"/>
        <link rel="up" title="Key Concepts" href="keyconcepts.html"/>
        <link rel="next" title="Native language bindings" href="../bindings/bindings.html"/>
        <link rel="prev" title="Delays" href="delays.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Hoverfly
          

          
          </a>

          
            
            
              <div class="version">
                v0.10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="keyconcepts.html">Key Concepts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="proxyserver.html">Hoverfly as a proxy server</a></li>
<li class="toctree-l2"><a class="reference internal" href="webserver.html">Hoverfly as a webserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="modes/modes.html">Hoverfly modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulations/simulations.html">Simulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="capturedtraffic.html">Captured traffic</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="destinationfiltering.html">Destination filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="meta.html">Meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="delays.html">Delays</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#middleware-interface">Middleware Interface</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bindings/bindings.html">Native language bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/reference.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Hoverfly</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="keyconcepts.html">Key Concepts</a> &raquo;</li>
      
    <li>Middleware</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/pages/keyconcepts/middleware.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="middleware">
<span id="id1"></span><h1>Middleware<a class="headerlink" href="#middleware" title="Permalink to this headline">¶</a></h1>
<p>Middleware intercepts traffic between the client and the API (whether real or simulated), and allowing you to manipulate it.</p>
<p>You can use middleware to manipulate data in simulated responses, or to inject unpredictable performance characteristics into your simulation.</p>
<p>Middleware works differently depending on the Hoverfly mode.</p>
<ul class="simple">
<li>Capture mode: middleware affects only <strong>outgoing requests</strong></li>
<li>Simulate mode: middleware affects only <strong>incoming responses</strong> (cache contents remain untouched)</li>
<li>Synthesize mode: middleware <strong>creates responses</strong></li>
<li>Modify mode: middleware affects <strong>requests and responses</strong></li>
</ul>
<p>You can write middleware in any language as long as it can be executed by the shell on the Hoverfly host. Middleware could be a binary file, or a script.</p>
<div class="section" id="middleware-interface">
<h2>Middleware Interface<a class="headerlink" href="#middleware-interface" title="Permalink to this headline">¶</a></h2>
<p>When middleware is called by Hoverfly, it expects to receive and return JSON (see <a class="reference internal" href="../reference/simulationschema.html#simulation-schema"><span class="std std-ref">Simulation schema</span></a>). Middleware can be used to modify the values in the JSON but <strong>must not</strong> modify the schema itself.</p>
<div class="figure">
<img alt="../../_images/middleware.mermaid.png" src="../../_images/middleware.mermaid.png" />
</div>
<p>Hoverfly will send the JSON object to middleware via the standard input stream. Hoverfly will then listen to the standard output stream and wait for the JSON object to be returned.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Middleware examples are covered in the tutorials section. See <a class="reference internal" href="../tutorials/randomlatency/randomlatency.html#randomlatency"><span class="std std-ref">Using middleware to simulate network latency</span></a> and <a class="reference internal" href="../tutorials/modifyingresponses/modifyingresponses.html#modifyingresponses"><span class="std std-ref">Using middleware to modify response payload and status code</span></a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../bindings/bindings.html" class="btn btn-neutral float-right" title="Native language bindings" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="delays.html" class="btn btn-neutral" title="Delays" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, SpectoLabs.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'v0.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>